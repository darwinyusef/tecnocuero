<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" href="https://codepen.io/simeydotme/pen/WNawZXp/be618208e9e17abe52c0fc63379e5f88.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;600;800&amp;display=swap"
        rel="stylesheet">
    <title>Boleta tecnocuero</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="lprincipal">
            <img src="logotecno.png">
            <h1>ESTA ES TU BOLETA VIRTUAL</h1>
             
              <div class="step">
                <h2>Registro e ingreso al evento</h2>
                <p>Para el registro e ingreso al evento por favor presenta esta boleta junto con tu documento de identidad f√≠sico. <br>
                El registro se llevar√° a cabo el 11 de septiembre en el transcurso del evento.
                </p>
                <p>En el momento del registro recibir√°s informaci√≥n / recursos necesarios para tu participaci√≥n en las conferencias o en el gran final</p>
              </div>
            
              <p class="important">
                ‚ö†Ô∏è Importante: Sin el escaneo del c√≥digo QR, no se permitir√° el ingreso al recinto ni la participaci√≥n en las actividades.
              </p>
        </div>
        <main id="app">
    
            <section class="ticket" id="fticket">
    
                <header class="front">
                    <div class="holo"></div>
                    <img class="logo" src="logotecno.png"
                        alt="The logo for the Application called Threads, an instagram App. It's a '@' symbol but with the tail going in the opposite direction.">
                    <aside class="divider"></aside>
                </header>
    
                <section class="back">
                    <div class="holo"></div>
                    <img class="logo principal" src="logotecno.png"
                        alt="The logo for the Application called Threads, an instagram App. It's a '@' symbol but with the tail going in the opposite direction.">
                    <div class="data">
                        <h3>ROL DEL USUARIO</h3>
                        <p  id="rol" contenteditable spellcheck=false></p>
                        <h3>Fecha - Hora</h3>
                        <p contenteditable spellcheck=false><small>11 Septiembre 2025  ‚è± 09:00 a.m. a 05:00 p.m.</small></p>
                        <h3>Tipo de Usuario</h3>
                        <p id="type" contenteditable spellcheck=false>Presencial</p>
                        <a class="qr" href="https://.com/" target="_blank">
                            <div id="qr-result"></div>
                        </a>
                    </div>
    
                    <aside class="divider">
                        <div class="username" style="text-transform: uppercase;">
                            <span  contenteditable spellcheck=false>üë¶üèª <span id="name"></span> <span id="last"></span></span>
                        </div>
                        <span id="mobile" class="usernum" contenteditable spellcheck=false></span>
                    </aside>
                </section>
    
            </section>
    
        </main>
    </div>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="script.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const documento = params.get('documento');
        console.log(documento);
        if(documento === ''|| documento === null) {
            alert("No se proporcion√≥ ning√∫n documento. Por favor, verifica e intenta nuevamente.");
            document.getElementById("fticket").style.display = "none";
            throw new Error("No documento provided");
        }
        
        fetch(`https://diosconsejero.com/apr/documento?documento=${documento}`)
        .then((res) => res.json())
        .then((res) =>  {
            if(res.length === 0) {
                document.getElementById("fticket").style.display = "none";
                alert("No se encontr√≥ el documento. Por favor, verifica e intenta nuevamente.");
                return;
            }
            const inf = res[0];
            document.getElementById("rol").textContent = inf.rol
            document.getElementById("type").textContent = inf.boleta
            document.getElementById("name").textContent = inf.nombre
            document.getElementById("last").textContent = inf.apellido
            document.getElementById("mobile").textContent = inf.celular
            generarQR(inf.id)
        })
        .catch((e) => {
            console.log(e);
        })

        function generarQR(textInfo) {
            const qrContainer = document.getElementById("qr-result");
            qrContainer.innerHTML = ""; 

            const texto = `010010-${textInfo}`;

            new QRCode(qrContainer, {
                text: texto,
                width: 256,
                height: 256,
                colorDark: "#fff",
                colorLight: "#333",
                correctLevel: QRCode.CorrectLevel.H
            });
        }
    </script>
</body>

</html>